---
phase: 04-short-term-improvements
plan: 01
type: execute
depends_on: [03-immediate-fixes]
files_modified: []
---

<objective>
Implement cross-CLI sync functionality for LLM collaboration

Purpose: Enable Claude, Gemini, GPT-4 to share context and collaborate on same codebase
Output: Working sync tools in CLI and MCP server
</objective>

<execution_context>
@.goodflows/workflows/execute-plan.md
@.goodflows/templates/summary.md
</execution_context>

<context>
@.goodflows/PROJECT.md
@.goodflows/plans/cross-cli-platform.md
@lib/sync-manager.js
</context>

<tasks>

<task type="auto" id="task-1">
  <name>Complete SyncManager implementation</name>
  <files>lib/sync-manager.js</files>
  <action>
    Finish the SyncManager class implementation:

    1. Implement export() method:
       - Export session, findings, and project context
       - Support role-based filtering (frontend, backend, testing, devops)
       - Write to .goodflows/sync/handoff-{llm}.json

    2. Implement import() method:
       - Read handoff file from specified LLM
       - Merge findings into context store
       - Resume or create new session

    3. Implement merge() method:
       - Combine contexts from multiple LLMs
       - Handle conflicts with configurable strategy
       - Write merged state to shared-state.json

    4. Implement status() method:
       - Show available handoff files
       - Display last export timestamps
       - Report any conflicts
  </action>
  <verify>npm test -- tests/unit/sync-manager.test.js</verify>
  <done>All SyncManager methods implemented and tested</done>
</task>

<task type="auto" id="task-2">
  <name>Add MCP sync handlers</name>
  <files>bin/mcp/handlers/sync.js</files>
  <action>
    Create MCP tool handlers for sync operations:

    1. goodflows_sync_export handler
    2. goodflows_sync_import handler
    3. goodflows_sync_merge handler
    4. goodflows_sync_status handler

    Register handlers in bin/mcp/handlers/index.js
  </action>
  <verify>npm test</verify>
  <done>All 4 sync MCP tools working</done>
</task>

<task type="auto" id="task-3">
  <name>Add CLI sync commands</name>
  <files>bin/cli/sync.js, bin/goodflows.js</files>
  <action>
    Add CLI commands for sync:

    goodflows sync export [--llm claude] [--role backend]
    goodflows sync import [--llm gemini]
    goodflows sync merge [--sources claude,gemini]
    goodflows sync status

    Register in main CLI entrypoint
  </action>
  <verify>goodflows sync status</verify>
  <done>CLI sync commands working</done>
</task>

</tasks>

<verification>
Before declaring complete:
- [ ] npm test passes
- [ ] goodflows sync export works
- [ ] goodflows sync import works
- [ ] MCP tools registered and functional
</verification>

<success_criteria>
- Cross-CLI sync fully implemented
- Can export from Claude, import in Gemini
- Tests pass
- Documentation updated
</success_criteria>
